<!--productos.html-->
<!DOCTYPE html>
<html
  lang="es"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head>
    <meta charset="UTF-8" />
    <title>Productos - TRASMULT</title>
    <link rel="stylesheet" th:href="@{/CSS/producto.css}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
    <link
      rel="shortcut icon"
      th:href="@{/img/trasmult.png}"
      type="image/x-png"
    />
  </head>

  <body>
    <header class="text-white py-3">
      <div
        class="container d-flex flex-wrap align-items-center justify-content-between"
      >
        <div class="logo display-6 fw-bold">
          SISTEMA DE INVENTARIO - TRASMULT
        </div>
        <nav class="nav flex-column flex-sm-row text-center text-sm-start">
          <a class="nav-link text-white fw-bold px-3" th:href="@{/inicio}"
            >INICIO</a
          >
          <a class="nav-link text-white fw-bold px-3" th:href="@{/productos}"
            >PRODUCTOS</a
          >
          <a class="nav-link text-white fw-bold px-3" th:href="@{/movimientos}"
            >ENTRADAS/SALIDAS</a
          >

          <!-- Reportes solo visible para ADMIN y SUPERVISOR -->
          <th:block sec:authorize="hasRole('ADMIN') or hasRole('SUPERVISOR')">
            <a th:href="@{/reportes}">REPORTES</a>
          </th:block>

          <a class="nav-link text-white fw-bold px-3" th:href="@{/logout}"
            >SALIR</a
          >
        </nav>
      </div>
    </header>

    <main class="container-fluid py-4" style="max-width: 1600px">
      <h2 class="mb-4">Productos</h2>

      <!--  BUSCADOR POR CDIGO -->
      <div class="card p-3 mb-4 shadow-sm">
        <h5 class="mb-3">Buscar productos por c贸digo</h5>
        <div class="row g-2 align-items-center">
          <div class="col-md-5">
            <input
              type="text"
              id="buscarCodigoProd"
              class="form-control"
              placeholder="Ej: A001"
            />
          </div>
          <div class="col-md-3">
            <button
              class="btn btn-primary w-100"
              onclick="filtrarProductosPorCodigo()"
            >
              Buscar
            </button>
          </div>
          <div class="col-md-4 text-end">
            <button
              class="btn btn-secondary w-100"
              onclick="limpiarFiltroProductos()"
            >
              Limpiar Filtro
            </button>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-8 mb-4">
          <div class="table-responsive mb-4">
            <table
              class="table table-striped table-bordered w-100"
              id="tablaProductos"
            >
              <thead class="table-primary">
                <tr>
                  <th>ITEM</th>
                  <th>CDIGO</th>
                  <th>UNIDAD DE MEDIDA</th>
                  <th>DESCRIPCIN</th>
                  <th>MARCA</th>
                  <th>CATEGORA</th>
                  <th>INVENTARIO</th>
                  <th>PRECIO</th>
                </tr>
              </thead>
              <tbody id="tablaProductos">
                <tr th:each="producto, iter : ${productos}">
                  <td th:text="${iter.index + 1}">ITEM</td>
                  <td th:text="${producto.codigo}">CODIGO</td>
                  <td th:text="${producto.unidad}">UNIDAD</td>
                  <td th:text="${producto.descripcion}">DESCRIPCION</td>
                  <td th:text="${producto.marca}">MARCA</td>
                  <td th:text="${producto.categoria}">CATEGORIA</td>
                  <td th:text="${producto.inventario}">INVENTARIO</td>
                  <td th:text="${producto.precio}">PRECIO</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="col-md-4">
          <form id="formProducto">
            <div class="mb-3">
              <label for="codigo" class="form-label">C贸digo:</label>
              <input
                type="text"
                id="codigo"
                class="form-control"
                name="codigo"
                placeholder="A001"
                required
                pattern="A\d{1,3}"
                title="Debe empezar con 'A' seguido de hasta 3 n煤meros (ej: A001, A012,A232)"
              />
            </div>
            <div class="mb-3">
              <label for="unidad" class="form-label">Unidad de Medida:</label>
              <select id="unidad" class="form-control" name="unidad" required>
                <option value="">Selecciona una unidad</option>
                <option value="UNIDAD">UNIDAD</option>
                <option value="KILO">KILO</option>
                <option value="GRAMO">GRAMO</option>
                <option value="LITRO">LITRO</option>
                <option value="DOCENA">DOCENA</option>
                <option value="MILLAR">MILLAR</option>
                <option value="METRO">METRO</option>
                <option value="PAQUETE">PAQUETE</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="descripcion" class="form-label">Descripci贸n:</label>
              <input
                type="text"
                id="descripcion"
                class="form-control mayusculas"
                name="descripcion"
                placeholder="Informaci贸n del producto"
                required
              />
            </div>

            <div class="mb-3">
              <label for="marca" class="form-label">Marca:</label>
              <input
                type="text"
                id="marca"
                class="form-control mayusculas"
                name="marca"
                placeholder="Marca del producto"
                required
              />
            </div>

            <div class="mb-3">
              <label for="categoria" class="form-label">Categor铆a:</label>
              <select
                id="categoria"
                class="form-control"
                name="categoria"
                required
              >
                <option value="">Selecciona una categor铆a</option>
                <option value="TILES">TILES</option>
                <option value="HERRAMIENTAS">HERRAMIENTAS</option>
                <option value="MATERIALES">MATERIALES</option>
                <option value="LUBRICANTES">LUBRICANTES</option>
                <option value="REPUESTOS">REPUESTOS</option>
                <option value="ACCESORIOS">ACCESORIOS</option>
                <option value="OTROS">OTROS</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="inventario" class="form-label"
                >Inventario Inicial:</label
              >
              <input
                type="number"
                id="inventario"
                class="form-control"
                name="inventario"
                placeholder="Cantidad inicial del producto"
                required
              />
            </div>
            <div class="mb-3">
              <label for="precio" class="form-label">Precio:</label>
              <input
                type="number"
                step="0.01"
                id="precio"
                class="form-control"
                name="precio"
                placeholder="Precio del producto"
                required
              />
            </div>
            <button type="submit" class="btn btn-success mt-3 btn-agregar">
              Agregar Producto
            </button>
          </form>
        </div>
      </div>
    </main>

    <footer>
      <p>&copy; 2025 TRASMULT.MALABRIGO E.I.R.L</p>
    </footer>

    <script th:src="@{/JS/producto.js}"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
