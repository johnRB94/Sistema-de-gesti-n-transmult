<!--reportes.html-->
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8" />
    <title>Reportes - TRASMULT</title>
    <link rel="stylesheet" th:href="@{/CSS/reporte.css}" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
    <link rel="shortcut icon" th:href="@{/img/trasmult.png}" type="image/x-png" />
</head>

<body>
    <header class="text-white py-3">
        <div class="container d-flex flex-wrap align-items-center justify-content-between">
            <div class="logo display-6 fw-bold">
                SISTEMA DE INVENTARIO - TRASMULT
            </div>
            <nav class="nav flex-column flex-sm-row text-center text-sm-start">
                <a class="nav-link text-white fw-bold px-3" th:href="@{/inicio}">INICIO</a>
                <a class="nav-link text-white fw-bold px-3" th:href="@{/productos}">PRODUCTOS</a>
                <a class="nav-link text-white fw-bold px-3" th:href="@{/movimientos}">ENTRADAS/SALIDAS</a>

                <!-- Reportes solo visible para ADMIN y SUPERVISOR -->
                <th:block sec:authorize="hasRole('ADMIN') or hasRole('SUPERVISOR')">
                    <a th:href="@{/reportes}">REPORTES</a>
                </th:block>


                <a class="nav-link text-white fw-bold px-3" th:href="@{/logout}">SALIR</a>
            </nav>
        </div>
    </header>

    <main class="container-fluid py-4" style="max-width: 1600px">
        <h2 class="mb-4">Generar Reportes</h2>

        <div class="mb-4">
            <button id="btnGenerarReporteProductos" class="btn-producto">
                üîÑ Generar Reporte de Productos
            </button>
            <button id="btnGenerarReporteMovimientos" class="btn-movimiento">
                üîÑ Generar Reporte de Movimientos
            </button>

            <a href="/exportar-excel-productos" class="btn-producto">
                üì¶ Exportar Productos a Excel
            </a>
            <a href="/exportar-excel-movimientos" class="btn-movimiento">
                üì¶ Exportar Movimientos a Excel
            </a>
        </div>

        <div class="table-responsive mb-4">
            <h5 class="text-secondary">Vista previa - Productos</h5>
            <table class="table table-striped table-bordered w-100" id="tablaReporteProductos">
                <thead class="table-success">
                    <tr>
                        <th>ITEM</th>
                        <th>C√ìDIGO</th>
                        <th>UNIDAD DE MEDIDA</th>
                        <th>DESCRIPCI√ìN</th>
                        <th>MARCA</th>
                        <th>CATEGOR√çA</th>
                        <th>INVENTARIO</th>
                        <th>PRECIO</th>
                    </tr>
                </thead>
                <tbody id="cuerpoReporteProductos">
                    <tr th:each="prod, stat : ${productos}">
                        <td th:text="${stat.index + 1}"></td>
                        <td th:text="${prod.codigo}"></td>
                        <td th:text="${prod.unidad}"></td>
                        <td th:text="${prod.descripcion}"></td>
                        <td th:text="${prod.marca}"></td>
                        <td th:text="${prod.categoria}"></td>
                        <td th:text="${prod.inventario}"></td>
                        <td th:text="${prod.precio}"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="table-responsive mb-4">
            <h5 class="text-secondary">Vista previa - Movimientos</h5>
            <table class="table table-striped table-bordered w-100" id="tablaReporteMovimientos">
                <thead class="table-warning">
                    <tr>
                        <th>FECHA</th>
                        <th>C√ìDIGO</th>
                        <th>DESCRIPCI√ìN</th>
                        <th>MARCA</th>
                        <th>UNIDAD DE MEDIDA</th>
                        <th>ENTRADA</th>
                        <th>SALIDA</th>
                        <th>RESPONSABLE</th>
                    </tr>
                </thead>
                <tbody id="cuerpoReporteMovimientos">
                    <tr th:each="mov : ${movimientos}">
                        <td th:text="${mov.fecha}"></td>
                        <td th:text="${mov.codigo}"></td>
                        <td th:text="${mov.descripcion}"></td>
                        <td th:text="${mov.marca}"></td>
                        <td th:text="${mov.unidad}"></td>
                        <td th:text="${mov.entrada}"></td>
                        <td th:text="${mov.salida}"></td>
                        <td th:text="${mov.responsable}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 TRASMULT.MALABRIGO E.I.R.L</p>
    </footer>

    <script th:src="@{/JS/reporte.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</body>

</html>